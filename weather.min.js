var x=$("#console");Weather={grid:40,forecastIOKey:"0ea12a6cd58c887c14ebd67679e11701",get:function(){Weather.getLocation()},getForecast:function(e){return url="https://api.forecast.io/forecast/"+Weather.forecastIOKey+"/"+e.latitude+","+e.longitude,console.log("fetching weather from "+url),out=Bouncer.get(url)},getLocation:function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(Weather.doWeather,Weather.showError):x.innerHTML="Geolocation is not supported by this browser."},doWeather:function(e){return out=Weather.getForecast(e.coords).response,weather=JSON.parse(out),Weather.makeClouds(weather.currently.cloudCover),weather.currently.cloudCover},showError:function(e){switch(e.code){case e.PERMISSION_DENIED:x.innerHTML="User denied the request for Geolocation.";break;case e.POSITION_UNAVAILABLE:x.innerHTML="Location information is unavailable.";break;case e.TIMEOUT:x.innerHTML="The request to get user location timed out.";break;case e.UNKNOWN_ERROR:x.innerHTML="An unknown error occurred."}},makeClouds:function(e){$("#loading").remove();var o=document.getElementById("canvas");o.width=document.body.clientWidth,o.height=document.body.clientHeight,canvasX=o.width,canvasY=o.height;var t=o.getContext("2d"),r=new Image;r.onload=function(){for(var o=canvasX-1;o>=0;o--)if(o%Weather.grid===0)for(var a=canvasY-1;a>=0;a--)a%Weather.grid===0&&Math.random()<=e&&t.drawImage(r,o,a)},r.src="cloud.png"}};